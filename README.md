# 斐讯N1 OpenWrt旁路由配置

## Step1 刻录镜像

我用的是[这个大佬打包的镜像](https://www.right.com.cn/forum/thread-5840339-1-1.html)。

使用[balenaEtcher](https://www.balena.io/etcher/)打包镜像。

![img](/assets/images/select_image.png)

![img](/assets/images/select_device.png)

写入完成之后，将u盘插入n1，断电，**拔掉网线**，重新接入电源。

> 最好不要在刻录镜像去OpenWrt后台设置之前接网线到路由器，实测可能会无法连接。

等待一会儿，找一台电脑（或者手机），扫描`Wifi`。选择`Phicomm_n1`，默认密码为`password`。

连接上`Wifi`之后，你会发现，卧槽，没网络啊，我TM是不是被骗了。别慌，才刚刚开始。

我们通过浏览器访问这个地址`192.168.10.1`。

> 访问的Ip地址由你的镜像决定。不一定是`192.168.10.1`，如果你完全是个小白，直接使用我发的镜像，不要瞎折腾。

访问地址之后，进入后台，会要求你输入用户名和密码。我们输入默认的用户名和密码。

```txt
# 用户名
root
# 密码
password
```

OK，进入后台。

## Step2 后台设置

![img](/assets/images/openwrt_backend.png)

> 如果你的页面和我的不一样，不要慌，是因为我使用了主题

我们下滑。选择**网络**>>**接口**，找到`LAN`口选择修改。

![img](/assets/images/set_LAN.png)

这里再强调以下怎么获取主路由IP地址：

> 请你想想你访问路由器后台用的是什么IP地址，还是不知道就下载对应厂商的路由管理App，在LAN口设置里查看IP地址，把IP地址填在这里，把最后一个小数点后的数字改为188，你不设置成188也行，只要不和原本的数字相同且在0-255之间就行

下滑，找到`DHCP`服务器。

基本设置中，选择**忽略此接口**。

选择**IPv6设置**，全部禁用。

![img](/assets/images/DHCP.png)

![img](/assets/images/IPv6.png)

**保存**，选择**物理设置**。选择**取消桥接**，并且接口中选择`eth0(LAN)`。

![img](/assets/images/cancel.png)

> 这里一定要注意，网上很多教程取消桥接就完事了，你如果至取消桥接，默认选择的接口是WAN口，你如果保存并应用了，那么恭喜你，你再也进不去后台了，要么你重新来一遍，要么你ssh进入后台重新桥接上。再次强调，取消桥接之后选择eth0（LAN）

**保存并应用**。

这时候，我们已经用不上这个Wifi了，我们已经可以通过主路由访问`OpenWrt`后台界面。且取消桥接这个wifi是不提供网络连接的，防止我们会错误连上这个wifi，可以选择把这个无线关掉（可选）。

## Step3 主路由设置

我们连接到主路由的Wifi。访问你之前设置的LAN口的`IPv4`地址。我这里是`192.168.8.188`。输入用户名和密码再次进入后台。

我们滑动到下方，找到**网络**>>**无线**，关闭这个无线。

然后我们进入主路由的后台，访问**主路由的IP地址**，我这里是`192.168.8.1`。

找到**DHCP**设置。

![img](/assets/images/main_DHCP.png)

保存之后重新连接Wifi。

至此，旁路由设置完毕。我们访问网页的流量就会经过旁路由，再转发回主路由，我们就可以使用各种插件了。

后面我们会介绍如何设置旁路由插件实现科学上网，精准分流，解锁网易云，过滤广告等功能。

- OpenClash + 双AdGuardHome
- MosDNS
- 微信推送
- 青龙面板
- 解锁网易云